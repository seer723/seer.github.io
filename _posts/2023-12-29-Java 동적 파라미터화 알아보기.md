---
title: "Java 동적 파라미터화 알아보기"
last_modified_at: 2023-12-29
categories:
  - Java
tags:
  - Java
  - Behavior Parameterization
  - Strategy Design Pattern
  - Lambda
---

> 다른 분이 개발한 코드를 수정하면서 Stream.flatMap() 메서드를 처음 보았는데요.  
> 접해보지 못했던 함수라 어떤 식으로 사용하는지 학습하고 이를 정리해봤어요.  

##### 1. 농장재고목록 애플리케이션

```java
public class Apple {
    private Color color;
    private int weight;

    public Apple(Color color, int weight) {
        this.color = color;
        this.weight = weight;
    }

    public Color getColor() {
        return color;
    }

    public int getWeight() {
        return weight;
    }

    public enum Color {
        RED, GREEN
    }

    @Override
    public String toString() {
        return "Apple{" +
                "color=" + color +
                ", weight=" + weight +
                '}';
    }
}
```

##### 2. 첫 번째 시도, 녹색 사과 필터링

```java
public static List<Apple> filterGreenApples(List<Apple> inventory) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            if (GREEN.equals(apple.getColor())) {
                result.add(apple);
            }
        }
        return result;
    }
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterGreenApples(inventory);
        System.out.println(greenApples);
    }

    public static List<Apple> filterGreenApples(List<Apple> inventory) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            if (GREEN.equals(apple.getColor())) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
```

##### 3. 두 번째 시도, 색 파라미터 추가

```java
public static List<Apple> filterApplesByColor(List<Apple> inventory, Apple.Color color) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            if (apple.getColor().equals(color)) {
                result.add(apple);
            }
        }
        return result;
    }
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterApplesByColor(inventory, GREEN);
        List<Apple> redApples = filterApplesByColor(inventory, RED);
        System.out.println(greenApples);
        System.out.println(redApples);
    }

    public static List<Apple> filterApplesByColor(List<Apple> inventory, Apple.Color color) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            if (apple.getColor().equals(color)) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[Apple{color=RED, weight=80}, Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=RED, weight=252}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
```

##### 4. 세 번째 시도, 가능한 모든 속성 파라미터화

```java
public static List<Apple> filterApples(List<Apple> inventory, Apple.Color color, int weight, boolean flag) {
    List<Apple> result = new ArrayList<>();
    for (Apple apple : inventory) {
        if ((flag && apple.getColor().equals(color)) || (!flag && apple.getWeight() > weight)) {
            result.add(apple);
        }
    }
    return result;
}
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterApples(inventory, GREEN, 0, true);
        List<Apple> heavyApples = filterApples(inventory, null, 150, false);
        System.out.println(greenApples);
        System.out.println(heavyApples);
    }

    public static List<Apple> filterApples(List<Apple> inventory, Apple.Color color, int weight, boolean flag) {
        List<Apple> result = new ArrayList<>();
        for (Apple apple : inventory) {
            if ((flag && apple.getColor().equals(color)) ||
                (!flag && apple.getWeight() > weight)) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=GREEN, weight=375}, Apple{color=RED, weight=252}, Apple{color=GREEN, weight=213}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
```

##### 5. 네 번째 시도, 동작 파라미터화

```java
interface ApplePredicate {
        boolean test(Apple apple);
    }

    public static class AppleHeavyWeightPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return apple.getWeight() > 150;
        }
    }

    public static class AppleGreenColorPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return GREEN.equals(apple.getColor());
        }
    }

    public static class AppleRedAndHeavyPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return RED.equals(apple.getColor()) && apple.getWeight() > 150;
        }
    }

    public static List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
        List<Apple> result = new ArrayList<>();
        for(Apple apple: inventory) {
            if(p.test(apple)) {
                result.add(apple);
            }
        }
        return result;
    }
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterApples(inventory, new AppleGreenColorPredicate());
        List<Apple> heavyApples = filterApples(inventory, new AppleHeavyWeightPredicate());
        List<Apple> redAndHeavyApples = filterApples(inventory, new AppleRedAndHeavyPredicate());
        System.out.println(greenApples);
        System.out.println(heavyApples);
        System.out.println(redAndHeavyApples);
    }

    interface ApplePredicate {
        boolean test(Apple apple);
    }

    public static class AppleHeavyWeightPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return apple.getWeight() > 150;
        }
    }

    public static class AppleGreenColorPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return GREEN.equals(apple.getColor());
        }
    }

    public static class AppleRedAndHeavyPredicate implements ApplePredicate {
        @Override
        public boolean test(Apple apple) {
            return RED.equals(apple.getColor()) && apple.getWeight() > 150;
        }
    }

    public static List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
        List<Apple> result = new ArrayList<>();
        for(Apple apple: inventory) {
            if(p.test(apple)) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=GREEN, weight=375}, Apple{color=RED, weight=252}, Apple{color=GREEN, weight=213}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=RED, weight=252}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
```

##### 6. 다섯 번째 시도, 익명 클래스 사용

```java
List<Apple> greenApples = filterApples(inventory, new ApplePredicate() {
    @Override
    public boolean test(Apple apple) {
        return GREEN.equals(apple.getColor());
    }
});

List<Apple> heavyApples = filterApples(inventory, new ApplePredicate() {
    @Override
    public boolean test(Apple apple) {
        return apple.getWeight() > 150;
    }
});

List<Apple> redAndHeavyApples = filterApples(inventory, new ApplePredicate() {
    @Override
    public boolean test(Apple apple) {
        return RED.equals(apple.getColor()) && apple.getWeight() > 150;
    }
});
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterApples(inventory, new ApplePredicate() {
            @Override
            public boolean test(Apple apple) {
                return GREEN.equals(apple.getColor());
            }
        });

        List<Apple> heavyApples = filterApples(inventory, new ApplePredicate() {
            @Override
            public boolean test(Apple apple) {
                return apple.getWeight() > 150;
            }
        });

        List<Apple> redAndHeavyApples = filterApples(inventory, new ApplePredicate() {
            @Override
            public boolean test(Apple apple) {
                return RED.equals(apple.getColor()) && apple.getWeight() > 150;
            }
        });

        System.out.println(greenApples);
        System.out.println(heavyApples);
        System.out.println(redAndHeavyApples);
    }

    interface ApplePredicate {
        boolean test(Apple apple);
    }

    public static List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
        List<Apple> result = new ArrayList<>();
        for(Apple apple: inventory) {
            if(p.test(apple)) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=GREEN, weight=375}, Apple{color=RED, weight=252}, Apple{color=GREEN, weight=213}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=RED, weight=252}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
```

##### 7. 여섯 번째 시도, 람다 표현식 사용

```java
List<Apple> greenApples = filterApples(inventory, apple -> GREEN.equals(apple.getColor()));
        List<Apple> heavyApples = filterApples(inventory, apple -> apple.getWeight() > 150);
        List<Apple> redAndHeavyApples = filterApples(inventory, apple -> RED.equals(apple.getColor()) && apple.getWeight() > 150);
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filterApples(inventory, apple -> GREEN.equals(apple.getColor()));
        List<Apple> heavyApples = filterApples(inventory, apple -> apple.getWeight() > 150);
        List<Apple> redAndHeavyApples = filterApples(inventory, apple -> RED.equals(apple.getColor()) && apple.getWeight() > 150);

        System.out.println(greenApples);
        System.out.println(heavyApples);
        System.out.println(redAndHeavyApples);
    }

    interface ApplePredicate {
        boolean test(Apple apple);
    }

    public static List<Apple> filterApples(List<Apple> inventory, ApplePredicate p) {
        List<Apple> result = new ArrayList<>();
        for(Apple apple: inventory) {
            if(p.test(apple)) {
                result.add(apple);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=GREEN, weight=375}, Apple{color=RED, weight=252}, Apple{color=GREEN, weight=213}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
[Apple{color=RED, weight=155}, Apple{color=RED, weight=207}, Apple{color=RED, weight=252}, Apple{color=RED, weight=301}, Apple{color=RED, weight=274}]
```

##### 8. 일곱 번째 시도, 리스트 형식으로 추상화

```java
interface Predicate<T> {
        boolean test(T t);
    }

    public static <T> List<T> filter(List<T> list, Predicate<T> p) {
        List<T> result = new ArrayList<>();
        for(T e: list) {
            if(p.test(e)) {
                result.add(e);
            }
        }
        return result;
    }
```

```java
public class Main {
    public static void main(String[] args) {
        List<Apple> inventory = Arrays.asList(
                new Apple(RED, 80),
                new Apple(RED, 155),
                new Apple(RED, 207),
                new Apple(GREEN, 97),
                new Apple(GREEN, 136),
                new Apple(GREEN, 375),
                new Apple(RED, 252),
                new Apple(GREEN, 213),
                new Apple(RED, 301),
                new Apple(RED, 274)
        );

        List<Apple> greenApples = filter(inventory, apple -> GREEN.equals(apple.getColor()));
        List<Integer> evenNumbers = filter(Arrays.asList(1, 2, 3, 4, 5, 6), i -> i % 2 == 0);

        System.out.println(greenApples);
        System.out.println(evenNumbers);
    }

    interface Predicate<T> {
        boolean test(T t);
    }

    public static <T> List<T> filter(List<T> list, Predicate<T> p) {
        List<T> result = new ArrayList<>();
        for(T e: list) {
            if(p.test(e)) {
                result.add(e);
            }
        }
        return result;
    }
}
```

```json
[Apple{color=GREEN, weight=97}, Apple{color=GREEN, weight=136}, Apple{color=GREEN, weight=375}, Apple{color=GREEN, weight=213}]
[2, 4, 6]
```

오늘도 미션 클리어! 👍