---
title: "Realm ì‚¬ìš©ë²•"
last_modified_at: 2023-12-02
categories:
  - React-Native
tags:
  - React-Native
  - Realm
  - Realm-React
---

> ì†Œí•¨ ëª…ìƒì•±ì„ ì•ìœ¼ë¡œ ì–´ë–»ê²Œ ìš´ì˜í• ì§€ì— ëŒ€í•´ ê³ ë¯¼í•´ë´¤ë‹¤.  
> ì•± ì°½ì—…ë„ì „ì€ ëë‚¬ì§€ë§Œ ì†Œí•¨ì•±ì€ ê³„ì† ë‚¨ì•„ìˆì—ˆìœ¼ë©´ í–ˆë‹¤.  
> ê·¸ë˜ì„œ ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„œë²„ ì½”ë“œë¥¼ ëª¨ë‘ ì§€ìš°ê¸°ë¡œ í–ˆë‹¤.  
> AWS ì„œë²„ë¹„ìš©ì´ ë§¤ì›” ë¹ ì ¸ë‚˜ê°€ê¸° ë•Œë¬¸ì´ë‹¤.  
> ëŒ€ì‹  Realmì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.  
> Realm ì‚¬ìš©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì.

## 1. React-Native í”„ë¡œì íŠ¸ ìƒì„±
í”„ë¡œì íŠ¸ ìƒì„± ê²½ë¡œë¡œ ì´ë™í•œ í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  React-Native í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.

```shell
npx react-native init MyRealm --template react-native-template-typescript
```

ì €ëŠ” D ë“œë¼ì´ë¸Œì˜ study í´ë”ì— React-Native í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì—ˆì–´ìš”.

ì„¤ì¹˜ ì™„ë£Œ í›„ ì•„ë˜ ëª…ë ¹ë¬¸ì„ ì‹¤í–‰ì‹œì¼œì£¼ì„¸ìš”.

```javascript
cd "D:\study\MyRealm" && npx react-native run-android
```

ëª…ë ¹ë¬¸ì´ ì‹¤í–‰ë˜ë©´ ì•±ì´ ì‹¤í–‰ë˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì´ ì´ˆê¸° í™”ë©´ì´ ë‚˜ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì–´ìš”.

![react-native-init-page](/assets/posts/2023-12-02-01/react-native-init-page.jpg){: width="240" style="display:block; margin-left:auto; margin-right:auto"}

<br>

## 2. Realm ì„¤ì¹˜

í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í–ˆìœ¼ë‹ˆ ì´ë²ˆì—” Realm ê³¼ @realm/react ë¥¼ ì„¤ì¹˜í•´ë³¼ê²Œìš”.

@realm/react ì€ Realm ì‚¬ì—ì„œ React-Native ì—ì„œ Realm ì„ ì‚¬ìš©í•˜ê¸° í¸í•˜ë„ë¡ ì œê³µí•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ˆìš”.

npm ë˜ëŠ” yarn ì¤‘ í¸í•œ ë°©ë²•ìœ¼ë¡œ ì„¤ì¹˜í•´ì£¼ì‹œë©´ ë˜ìš”.

```shell
npm install realm @realm/react
yarn add realm @realm/react
```

<br>

## 3. Realm ìƒ˜í”Œ ì½”ë“œ ì‹¤í–‰
ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´ [realm-react](https://github.com/realm/realm-js/tree/main/packages/realm-react#readme){:target="_blank"} ì˜ ìƒ˜í”Œ ì½”ë“œë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ì œë¡œ Realm ì´ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•´ë³¼ê²Œìš”.

ì•„ë˜ëŠ” ì œê°€ ì‚¬ìš©í•œ ì†ŒìŠ¤ì½”ë“œì˜ˆìš”.

```jsx
import React, { useState } from 'react';
import { SafeAreaView, View, Text, TextInput, FlatList, Pressable } from "react-native";
import { Realm, RealmProvider, useRealm, useQuery } from '@realm/react'

class Task extends Realm.Object {
  _id!: Realm.BSON.ObjectId;
  description!: string;
  isComplete!: boolean;
  createdAt!: Date;

  static generate(description: string, isComplete: boolean) {
    return {
      _id: new Realm.BSON.ObjectId(),
      description,
      isComplete,
      createdAt: new Date(),
    };
  }

  static schema = {
    name: 'Task',
    primaryKey: '_id',
    properties: {
      _id: 'objectId',
      description: 'string',
      isComplete: 'bool',
      createdAt: 'date',
    },
  };
}

export default function AppWrapper() {
  return (
    <RealmProvider schema={[Task]}><App /></RealmProvider>
  )
}

function App(): JSX.Element {
  const realm = useRealm();
  const tasks = useQuery(Task);
  const [newDescription, setNewDescription] = useState("")

  return (
    <SafeAreaView>
      <View style={ { flexDirection: 'row', justifyContent: 'center', margin: 10 } }>
        <TextInput
          value={newDescription}
          placeholder="Enter new task description"
          onChangeText={setNewDescription}
        />
        <Pressable
          onPress={() => {
            realm.write(() => {
              realm.create("Task", Task.generate(newDescription, false));
            });
            setNewDescription("")
          }}><Text>â•</Text></Pressable>
      </View>
      <FlatList data={tasks.sorted("createdAt")} keyExtractor={(item) => item._id.toHexString()} renderItem={({ item }) => {
        return (
          <View style={ { flexDirection: 'row', justifyContent: 'center', margin: 10 } }>
            <Pressable
              onPress={() =>
                realm.write(() => {
                  item.isComplete = !item.isComplete
                })
              }><Text>{item.isComplete ? "âœ…" : "â˜‘ï¸"}</Text></Pressable>
            <Text style={ { paddingHorizontal: 10 } } >{item.description}</Text>
            <Pressable
              onPress={() => {
                realm.write(() => {
                  realm.delete(item)
                })
              }} ><Text>{"ğŸ—‘ï¸"}</Text></Pressable>
          </View>
        );
      }} ></FlatList>
    </SafeAreaView >
  );
}
```

ì†ŒìŠ¤ ìˆ˜ì • í›„ ì•±ì„ ì‹¤í–‰í•˜ê³  ì§ì ‘ ì‚¬ìš©í•´ë´¤ì–´ìš”.

![realm-react-run-screen](/assets/posts/2023-12-02-01/realm-react-run-screen.jpg){: width="240" style="display:block; margin-left:auto; margin-right:auto"}

ì˜ ë™ì‘í•˜ë„¤ìš”. ğŸ˜

ì†Œí•¨ì•±ì— Realm ì ìš©í•˜ëŸ¬ ê³ ê³ ì‹±!
